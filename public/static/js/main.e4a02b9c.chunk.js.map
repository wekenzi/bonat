{"version":3,"sources":["components/Product/Product.tsx","components/SingleAd/SingleAd.tsx","components/api.tsx","components/ProductsPage/ProductsPage.tsx","App.tsx","reportWebVitals.js","index.tsx"],"names":["Product","date","face","price","id","size","toDollarFormat","useCallback","toLocaleString","style","currency","dateFormatDaysAgo","value","Date","deltaDays","getTime","now","formatter","Intl","RelativeTimeFormat","Math","abs","round","weekday","year","month","day","format","className","fontSize","SingleAd","num","handleUniqeNum","useState","imageURL","setImageURL","useEffect","number","fetch","then","data","url","src","alt","ProductsPage","arrOfAdsNums","Array","from","keys","productsData","setProductsData","adNum","setAdNum","page","setPage","limit","sort","setSort","loading","setLoading","noNewResults","setNoNewResults","length","prev","handleScrollEvent","window","innerHeight","scrollY","document","body","offsetHeight","handleSortingButtonClick","json","getProducts","removeEventListener","addEventListener","role","type","onClick","map","item","index","key","App","href","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"8SA0CeA,EAtCC,SAAC,GAA8C,IAA5CC,EAA2C,EAA3CA,KAAMC,EAAqC,EAArCA,KAAUC,GAA2B,EAA/BC,GAA+B,EAA3BD,OAAOE,EAAoB,EAApBA,KAEhCC,EAAiBC,uBAAY,SAACJ,GAChC,OAAQA,EAAM,KAAKK,eAAe,QAAS,CAACC,MAAM,WAAYC,SAAS,UACzE,IAEIC,EAAoBJ,uBAAY,SAACK,GACnC,IAAMX,EAAO,IAAIY,KAAKD,GAChBE,GAAab,EAAKc,UAAYF,KAAKG,OAAvB,MACZC,EAAY,IAAIC,KAAKC,mBAAmB,SAC9C,GAAuC,IAApCC,KAAKC,IAAID,KAAKE,MAAMR,IAAmB,MAAO,QACjD,GAAGM,KAAKC,IAAID,KAAKE,MAAMR,IAAc,EAAG,CAOpC,OAAOb,EAAKO,eAAe,QANP,CAChBe,QAAS,QACTC,KAAM,UACNC,MAAO,UACPC,IAAK,YAIb,OAAOT,EAAUU,OAAOP,KAAKE,MAAMR,GAAY,UACjD,IAEF,OACI,qBAAKc,UAAU,oBAAf,SACI,qBAAKA,UAAU,WAAf,SACI,sBAAKA,UAAU,YAAf,UACI,mBAAGA,UAAU,mBAAmBnB,MAAO,CAACoB,SAAS,GAAD,OAAIxB,EAAJ,OAAhD,SAAiEH,IACjE,sBAAK0B,UAAU,iCAAf,UACI,oBAAIA,UAAU,mBAAd,SAAmCtB,EAAeH,KAClD,sBAAMyB,UAAU,iBAAhB,SAAmCjB,EAAkBV,gB,UCH9D6B,EA3BE,SAAC,GAAmE,IAAjEC,EAAgE,EAAhEA,IAAKC,EAA2D,EAA3DA,eAA2D,EAEhDC,mBAAiB,IAF+B,mBAEzEC,EAFyE,KAE/DC,EAF+D,KAYhF,OARAC,qBAAU,WCHP,IAAeC,KDIRN,ECHHO,MAAM,UAAD,OAAWD,IACtBE,MAAK,SAAAC,GAAI,OAAIA,EAAKC,QDEJF,MAAK,SAAAC,GACZL,EAAYK,GACZR,SAEN,IAIE,qBAAKJ,UAAU,oBAAf,SACI,qBAAKA,UAAU,+BAAf,SACI,qBAAKA,UAAU,YAAf,SACKM,EACG,qBAAKN,UAAU,YAAYc,IAAKR,EAAUS,IAAI,QAE9C,mBAAGf,UAAU,6BAAb,kCEuFTgB,EAvGM,WAEjB,IAAMC,EAAeC,MAAMC,KAAKD,MAAM,KAAKE,QAFpB,EAIiBf,mBAAqB,IAJtC,mBAIhBgB,EAJgB,KAIFC,EAJE,OAKGjB,mBAAiB,GALpB,mBAKhBkB,EALgB,KAKTC,EALS,OAMCnB,mBAAiB,GANlB,mBAMhBoB,EANgB,KAMVC,EANU,OAOGrB,mBAAiB,IAPpB,mBAOhBsB,EAPgB,aAQCtB,mBAAiB,UARlB,mBAQhBuB,EARgB,KAQVC,EARU,OASOxB,oBAAkB,GATzB,mBAShByB,EATgB,KASPC,EATO,OAUiB1B,oBAAkB,GAVnC,mBAUhB2B,EAVgB,KAUFC,EAVE,KAYjB7B,EAAiB,WAChBmB,EAAQN,EAAaiB,QAAQV,GAAS,SAAAW,GAAI,OAAIA,EAAO,MAGtDC,EAAoBzD,uBAAY,WAC7B0D,OAAOC,YAAcD,OAAOE,UAAaC,SAASC,KAAKC,cACxDX,GAAW,KAEjB,IAEIY,EAA2B,SAAC3D,GAC9B6C,EAAQ7C,GACRsC,EAAgB,IAChBI,EAAQ,GACRO,GAAgB,GAChBT,EAAS,IA0Bb,OAvBAhB,qBAAU,WACDsB,GDtCN,WAAgF,IAA1CH,EAAyC,uDAA1B,GAAIC,EAAsB,uDAAR,QAC1E,OAAOlB,MAAM,mBAAD,OADsE,uDAA5C,EAC1B,mBAAmCiB,EAAnC,iBAAiDC,IAC5DjB,MAAK,SAAAC,GAAI,OAAIA,EAAKgC,UCqCfC,CAAYpB,EAAME,EAAOC,GAAMjB,MAAK,SAAAC,GAChC,GAAmB,IAAhBA,EAAKsB,OAIJ,OAHAH,GAAW,GACXE,GAAgB,QAChBI,OAAOS,oBAAoB,SAAUV,GAGzCd,GAAgB,SAAAa,GAAI,4BAAQA,GAAR,YAAiBvB,OACrCc,GAAQ,SAAAS,GAAI,OAAIA,EAAO,KACvBJ,GAAW,QAEd,CAACD,IAEJtB,qBAAU,WAIR,OAHA6B,OAAOS,oBAAoB,SAAUV,GACrCL,GAAW,GACXM,OAAOU,iBAAiB,SAAUX,GAC3B,kBAAMC,OAAOS,oBAAoB,SAAUV,MACjD,CAACR,IAIF,sBAAK5B,UAAU,kBAAf,UACI,qBAAKA,UAAU,WAAf,SACI,qBAAKA,UAAU,YAAf,SACI,sBAAKA,UAAU,oDAAf,UACI,mBAAGA,UAAU,MAAb,qBACA,sBAAKA,UAAU,YAAYgD,KAAK,QAAhC,UACI,wBAAQC,KAAK,SAASjD,UAAU,iBAAiBkD,QAAS,kBAAIP,EAAyB,UAAvF,mBACA,wBAAQM,KAAK,SAASjD,UAAU,kBAAkBkD,QAAS,kBAAIP,EAAyB,SAAxF,kBACA,wBAAQM,KAAK,SAASjD,UAAU,kBAAkBkD,QAAS,kBAAIP,EAAyB,OAAxF,0BAKhB,qBAAK3C,UAAU,MAAf,SACMqB,EAAaa,OAAS,GACpBb,EAAa8B,KAAI,SAACC,EAAeC,GAC7B,OAAIA,EAAQ,GAAK,KAAO,EACb,qCACH,wBAAC,EAAD,2BAAaD,GAAb,IAAmBE,IAAKF,EAAK5E,MAC7B,cAAC,EAAD,CAAU2B,IAAKc,EAAaM,GAAQnB,eAAgBA,GAAqBiD,MAGtE,wBAAC,EAAD,2BAAaD,GAAb,IAAmBE,IAAKF,EAAK5E,WAMlDsD,GAAW,qBAAK9B,UAAU,2DAAf,SACT,qBAAKA,UAAU,iBAAf,SACI,sBAAKxB,GAAG,OAAR,UACI,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,2CAMVwD,GAAgB,qBAAKhC,UAAU,2DAAf,SAA0E,qBAAKA,UAAU,YAAf,wCCxFzFuD,MAbf,WACE,OACE,sBAAKvD,UAAU,MAAf,UACE,qBAAKA,UAAU,6BAAf,SACE,qBAAKA,UAAU,kBAAf,SACE,mBAAGA,UAAU,eAAewD,KAAK,IAAjC,gCAGJ,cAAC,EAAD,QCCSC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBhD,MAAK,YAAkD,IAA/CiD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF3B,SAAS4B,eAAe,SAE1BX,M","file":"static/js/main.e4a02b9c.chunk.js","sourcesContent":["import React , { useCallback } from 'react';\r\nimport './Product.css';\r\nimport { IProduct } from './ProductModel';\r\n\r\nconst Product = ({ date, face, id, price, size }:IProduct) => {\r\n\r\n    const toDollarFormat = useCallback((price:number) =>{\r\n        return (price/100).toLocaleString(\"en-US\", {style:\"currency\", currency:\"USD\"});\r\n    },[])\r\n\r\n    const dateFormatDaysAgo = useCallback((value:string) => {\r\n        const date = new Date(value);\r\n        const deltaDays = (date.getTime() - Date.now()) / (1000 * 3600 * 24);\r\n        const formatter = new Intl.RelativeTimeFormat('en-US');\r\n        if(Math.abs(Math.round(deltaDays)) === 0) return 'today';\r\n        if(Math.abs(Math.round(deltaDays)) > 7) {\r\n            const options:any = {\r\n                weekday: \"short\",\r\n                year: \"numeric\",\r\n                month: \"2-digit\",\r\n                day: \"numeric\"\r\n            };\r\n            return date.toLocaleString('en-US', options);\r\n        }\r\n        return formatter.format(Math.round(deltaDays), 'days');\r\n    },[])\r\n\r\n    return (\r\n        <div className=\"col-md-4 col-sm-6\">\r\n            <div className=\"card m-3\">\r\n                <div className=\"card-body\">\r\n                    <p className=\"face text-center\" style={{fontSize:`${size}px`}}>{ face }</p>\r\n                    <div className=\"d-flex justify-content-between\">\r\n                        <h5 className=\"text-primary m-0\">{ toDollarFormat(price) }</h5>\r\n                        <span className=\"text-secondary\">{ dateFormatDaysAgo(date) }</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Product;\r\n","import React, {useEffect, useState} from 'react'\r\nimport { getAd } from '../api';\r\nimport './SingleAd.css';\r\n\r\nconst SingleAd = ({ num, handleUniqeNum }:{num:number, handleUniqeNum:Function}) => {\r\n\r\n    const [imageURL, setImageURL] = useState<string>('')\r\n\r\n    useEffect(()=>{\r\n        getAd(num).then(data => {\r\n            setImageURL(data)\r\n            handleUniqeNum()\r\n        })\r\n    },[])\r\n\r\n\r\n    return (\r\n        <div className=\"col-md-4 col-sm-6\">\r\n            <div className=\"card m-3 bg-info text-center\">\r\n                <div className=\"card-body\">\r\n                    {imageURL ? \r\n                        <img className='img-fluid' src={imageURL} alt=\"img\" /> \r\n                    : \r\n                        <p className='m-0 text-center text-white'>Loading Ad...</p>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SingleAd\r\n","export function getProducts(page:number = 1, limit:number = 15, sort:string = 'price'){\r\n    return fetch(`/products?_page=${page}&_limit=${limit}_sort=${sort}`)\r\n    .then(data => data.json())\r\n}\r\n\r\nexport function getAd(number:number){\r\n    return fetch(`/ads?r=${number}`)\r\n    .then(data => data.url)\r\n}","import React , {useState, useEffect, useCallback} from 'react';\r\nimport './ProductsPage.css';\r\nimport Product from \"../Product/Product\";\r\nimport { IProduct } from '../Product/ProductModel';\r\nimport { getProducts } from '../api';\r\nimport SingleAd from '../SingleAd/SingleAd';\r\n\r\nconst ProductsPage = () => {\r\n    \r\n    const arrOfAdsNums = Array.from(Array(100).keys())\r\n\r\n    const [productsData, setProductsData] = useState<IProduct[]>([])\r\n    const [adNum, setAdNum] = useState<number>(0)\r\n    const [page, setPage] = useState<number>(1)\r\n    const [limit, setLimit] = useState<number>(15)\r\n    const [sort, setSort] = useState<string>('price')\r\n    const [loading, setLoading] = useState<boolean>(false)\r\n    const [noNewResults, setNoNewResults] = useState<boolean>(false)\r\n\r\n    const handleUniqeNum = () =>{\r\n        if(adNum < arrOfAdsNums.length) setAdNum(prev => prev + 1)\r\n    }\r\n\r\n    const handleScrollEvent = useCallback(() => {\r\n        if ((window.innerHeight + window.scrollY) === document.body.offsetHeight) {\r\n            setLoading(true)\r\n        }\r\n    },[])\r\n\r\n    const handleSortingButtonClick = (value:string) => {\r\n        setSort(value)\r\n        setProductsData([])\r\n        setPage(1)\r\n        setNoNewResults(false)\r\n        setAdNum(0)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!loading) return;\r\n        getProducts(page, limit, sort).then(data=>{\r\n            if(data.length === 0) {\r\n                setLoading(false)\r\n                setNoNewResults(true)\r\n                window.removeEventListener('scroll', handleScrollEvent);\r\n                return;\r\n            }\r\n            setProductsData(prev => [...prev, ...data])\r\n            setPage(prev => prev + 1)\r\n            setLoading(false)\r\n        })\r\n      }, [loading]);\r\n\r\n      useEffect(() => {\r\n        window.removeEventListener('scroll', handleScrollEvent);\r\n        setLoading(true)\r\n        window.addEventListener('scroll', handleScrollEvent)\r\n        return () => window.removeEventListener('scroll', handleScrollEvent);\r\n      }, [sort]);\r\n\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className='card m-3'>\r\n                <div className='card-body'>\r\n                    <div className='d-flex justify-content-between align-items-center'>\r\n                        <p className='m-0'>Sort By</p>\r\n                        <div className=\"btn-group\" role=\"group\">\r\n                            <button type=\"button\" className=\"btn btn-danger\" onClick={()=>handleSortingButtonClick('price')}>Price</button>\r\n                            <button type=\"button\" className=\"btn btn-warning\" onClick={()=>handleSortingButtonClick('size')}>Size</button>\r\n                            <button type=\"button\" className=\"btn btn-success\" onClick={()=>handleSortingButtonClick('id')}>ID</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                { productsData.length > 0 && \r\n                    productsData.map((item:IProduct, index)=>{\r\n                        if((index + 1) % 20 === 0) {\r\n                            return <>\r\n                                <Product {...item} key={item.id} />\r\n                                <SingleAd num={arrOfAdsNums[adNum]} handleUniqeNum={handleUniqeNum} key={index}/>\r\n                            </>\r\n                        } else {\r\n                            return <Product {...item} key={item.id} />\r\n                        }\r\n                    })\r\n                }\r\n            </div>\r\n\r\n            { loading && <div className='card m-3 text-center text-info font-monospace blockquote'>\r\n                <div className='card-body py-4'>\r\n                    <div id=\"load\">\r\n                        <div>G</div>\r\n                        <div>N</div>\r\n                        <div>I</div>\r\n                        <div>D</div>\r\n                        <div>A</div>\r\n                        <div>O</div>\r\n                        <div>L</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            }\r\n\r\n            { noNewResults && <div className='card m-3 text-center text-info font-monospace blockquote'><div className='card-body'>~ end of catalogue ~</div></div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductsPage;\r\n","import './App.css';\nimport ProductsPage from './components/ProductsPage/ProductsPage';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <nav className=\"navbar navbar-dark bg-dark\">\n        <div className=\"container-fluid\">\n          <a className=\"navbar-brand\" href=\"#\">Bonat Products</a>\n        </div>\n      </nav>\n      <ProductsPage/>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}